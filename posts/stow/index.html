<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Managing dotfiles with GNU Stow | taihen.org / 418 ... engineering in progress</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="
In Unix-like operating systems, dotfile is synonymous with hidden file. Usually used by programs to store configuration variables.
I have multiple machines, which I regularly work on. I keep sync of a set of personalized dotfiles between them – customized settings for programs that I’m using, like many of you. Till now, I was using my private git repository for things like my private scripts, Mutt, Irssi, Ekg2 or Tmux configurations. On the other hand some I keep publicly available for others i.e. on GitHub like Vim configs. And oh boy, there are so many of them! The true is, I customize almost everything that I’m using including simple tools like cp (just to get progress bar or interactivity)."><meta name=generator content="Hugo 0.144.0"><meta name=robots content="index, follow"><link rel=stylesheet href=/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css><link rel=canonical href=https://taihen.org/posts/stow/><meta property="og:url" content="https://taihen.org/posts/stow/"><meta property="og:site_name" content="taihen.org / 418 ... engineering in progress"><meta property="og:title" content="Managing dotfiles with GNU Stow"><meta property="og:description" content="In Unix-like operating systems, dotfile is synonymous with hidden file. Usually used by programs to store configuration variables.
I have multiple machines, which I regularly work on. I keep sync of a set of personalized dotfiles between them – customized settings for programs that I’m using, like many of you. Till now, I was using my private git repository for things like my private scripts, Mutt, Irssi, Ekg2 or Tmux configurations. On the other hand some I keep publicly available for others i.e. on GitHub like Vim configs. And oh boy, there are so many of them! The true is, I customize almost everything that I’m using including simple tools like cp (just to get progress bar or interactivity)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-09-11T22:36:36+01:00"><meta property="article:modified_time" content="2013-09-11T22:36:36+01:00"><meta itemprop=name content="Managing dotfiles with GNU Stow"><meta itemprop=description content="In Unix-like operating systems, dotfile is synonymous with hidden file. Usually used by programs to store configuration variables.
I have multiple machines, which I regularly work on. I keep sync of a set of personalized dotfiles between them – customized settings for programs that I’m using, like many of you. Till now, I was using my private git repository for things like my private scripts, Mutt, Irssi, Ekg2 or Tmux configurations. On the other hand some I keep publicly available for others i.e. on GitHub like Vim configs. And oh boy, there are so many of them! The true is, I customize almost everything that I’m using including simple tools like cp (just to get progress bar or interactivity)."><meta itemprop=datePublished content="2013-09-11T22:36:36+01:00"><meta itemprop=dateModified content="2013-09-11T22:36:36+01:00"><meta itemprop=wordCount content="882"><meta name=twitter:card content="summary"><meta name=twitter:title content="Managing dotfiles with GNU Stow"><meta name=twitter:description content="In Unix-like operating systems, dotfile is synonymous with hidden file. Usually used by programs to store configuration variables.
I have multiple machines, which I regularly work on. I keep sync of a set of personalized dotfiles between them – customized settings for programs that I’m using, like many of you. Till now, I was using my private git repository for things like my private scripts, Mutt, Irssi, Ekg2 or Tmux configurations. On the other hand some I keep publicly available for others i.e. on GitHub like Vim configs. And oh boy, there are so many of them! The true is, I customize almost everything that I’m using including simple tools like cp (just to get progress bar or interactivity)."></head><body class="ma0 avenir bg-near-white production"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">taihen.org / 418 ... engineering in progress</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/contact/ title="Contact page">Contact</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/posts/ title="Posts page">Posts</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Managing dotfiles with GNU Stow</h1><time class="f6 mv4 dib tracked" datetime=2013-09-11T22:36:36+01:00>September 11, 2013</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><blockquote><p>In Unix-like operating systems, dotfile is synonymous with hidden file. Usually used by programs to store configuration variables.</p></blockquote><p>I have multiple machines, which I regularly work on. I keep sync of a set of personalized dotfiles between them – customized settings for programs that I’m using, like many of you. Till now, I was using my private git repository for things like my private scripts, <a href=http://www.mutt.org/ title="Mutt E-Mail Client">Mutt</a>, <a href=http://www.irssi.org/ title="Irssi IRC Client">Irssi</a>, <a href=http://ekg2.org/ title="Ekg2 Multichat Client">Ekg2</a> or <a href=http://tmux.sourceforge.net/ title="Tmux Terminal Multiplexer">Tmux</a> configurations. On the other hand some I keep publicly available for others i.e. on <a href=https://github.com/taihen title="GitHub Taihen">GitHub</a> like <a href=https://github.com/taihen/vimfiles>Vim configs</a>. And oh boy, there are so many of them! The true is, I customize almost everything that I’m using including simple tools like cp (just to get progress bar or interactivity).</p><p>The problem was always with setting them up on new machine and update it when I need to. Usually it means manually creating symbolic links or writing custom script to do it for me automatically which I did at certain point. While it was fun to write the script, I always knew that it did not cover all my use cases, and it was not really flexible in terms of complex directory structures and so on. Many people have looked at this problem before – and solved it in their own ways. I wasn’t looking for a solution for a long time as I find most of them were quite obscure (as my script wasn’t obscure enough), additionally most had some dependencies that I didn’t wanted on all of my servers like <a href=https://github.com/technicalpickles/homesick title="Homesick Git repository">Homesick</a> (yes, I know there is <a href=https://github.com/andsens/homeshick title="Homeshick Git repository">Homeshick</a>).</p><p>But then I came around GNU Stow, completely by accident researching ways to deploy software. This looked very useful for automated deployment scripts and it is commonly available in EPEL for RHEL/CentOS and official repositories in Debian/Ubuntu. But GNU Stow could be also a great way to manage your dotfiles. I like reusing existing tools, so it appealed to me immediately.</p><h3 id=gnu-stow>GNU Stow</h3><blockquote><p>GNU Stow is a symlink farm manager which takes distinct packages of software and/or data located in separate directories on the filesystem, and makes them appear to be installed in the same place.</p></blockquote><p>In other words, it tracks the necessary files in subdirectories and links those files from there to the desirable directory.</p><h4 id=working-with-gnu-stow>Working with GNU Stow</h4><p>After installing GNU Stow (apt-get/yum/brew install stow) you will find out that there are many ways to work with it.</p><p>I’ve been experimenting with three setups:</p><ul><li>per-application</li><li>per-environment</li><li>external</li></ul><h5 id=per-application>Per-application</h5><p>Clone your Git dotfiles repository to ~/dotfiles, and enter the directory.</p><p>You need to organize per-application directories for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>~/dotfiles/
</span></span><span style=display:flex><span>    irssi/
</span></span><span style=display:flex><span>        .config
</span></span><span style=display:flex><span>        themes/
</span></span><span style=display:flex><span>    bash/
</span></span><span style=display:flex><span>        .bashrc
</span></span><span style=display:flex><span>        .bashrc_aliases
</span></span><span style=display:flex><span>    vim/
</span></span><span style=display:flex><span>        .vimrc
</span></span><span style=display:flex><span>        .vim/
</span></span><span style=display:flex><span>               bundle/
</span></span><span style=display:flex><span>               colors/
</span></span></code></pre></div><p>This will allow you to choose which packages/configuration you would like to install. For example presumably you will not need Irssi config on all of your machines but you would like to have your <strong>.bashrc</strong> consistent across all of them.</p><p>To install Bash configuration files, just do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/dotfiles
</span></span><span style=display:flex><span>stow bash
</span></span></code></pre></div><p>If you would like to install Vim configuration files as well, do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/dotfiles
</span></span><span style=display:flex><span>stow vim
</span></span></code></pre></div><p>GNU Stow will symbolically link ~/dotfiles/bash/ and ~/dotfiles/vim to you home directory, so that content of bash and vim will be exposed in $HOME directory.</p><p>Removing a config package follows the same logic by adding <strong>-D</strong> flag and specifying installed package:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>stow -D bash
</span></span><span style=display:flex><span>stow -D vim
</span></span></code></pre></div><p>And <strong>-R</strong> flag to restow so, delete and install again, basically rescan package for any new files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>stow -R bash
</span></span><span style=display:flex><span>stow -R vim
</span></span></code></pre></div><h5 id=per-environment>Per-environment</h5><p>Again, clone your Git dotfiles repository to ~/dotfiles, and enter the directory.</p><p>You need to organise per-environemnt directories for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>~/dotfiles/
</span></span><span style=display:flex><span>    work/
</span></span><span style=display:flex><span>        .config/
</span></span><span style=display:flex><span>        .icewm/
</span></span><span style=display:flex><span>        .mutt/
</span></span><span style=display:flex><span>    server/
</span></span><span style=display:flex><span>        .tmux.conf
</span></span><span style=display:flex><span>    common/
</span></span><span style=display:flex><span>        .vimrc
</span></span><span style=display:flex><span>        .vim/
</span></span><span style=display:flex><span>               bundle/
</span></span><span style=display:flex><span>               colors/
</span></span><span style=display:flex><span>        .bashrc
</span></span><span style=display:flex><span>        .bashrc_aliases
</span></span></code></pre></div><p>This will allow you divide which packages/configuration you would like to install on which type of machines and simplify deployment. For example <strong>work</strong> would be Mutt configuration, IceWM configuration only installed on laptop/desktop, but TMux config on server. Some configs, of course, will be shared especially Vim or Bash.</p><p>To install work configuration files on your laptop/desktop, just do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/dotfiles
</span></span><span style=display:flex><span>stow work
</span></span></code></pre></div><p>But on server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/dotfiles
</span></span><span style=display:flex><span>stow server
</span></span></code></pre></div><p>And add shared configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/dotfiles
</span></span><span style=display:flex><span>stow common
</span></span></code></pre></div><h5 id=external>External</h5><p>Sometimes you might have external configs that <a href=http://dotfiles.github.io/ title="GitHub dotfiles">someone else is managing</a> and you just sync and use. I keep them in separate directory ~/Git and synchronise them every now and then. The problem is that if you would run stow on this repository in Git directory it would populate symbolic links where you would run stow command. This undesirable. But stow have trick for this as well. You can specify to which directory you would like to populate those symbolic links with <strong>-t</strong> flag. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Git
</span></span><span style=display:flex><span>stow -t ~ someones_dotfiles
</span></span></code></pre></div><p>Would symlink <strong>someones_dotfiles</strong> content to your home directory.</p><p>This is also useful as well if generally you would not like to keep your configuration in ~/dotfiles. Then you can also add <strong>stow -t ~</strong> in your aliases to prevent any accidents.</p><h3 id=summary>Summary</h3><p>Well, that’s all there is to it. So, I can say GNU Stow offers a quite neat and easily understandable solution for managing dotfiles while not relying on languages (GNU Stow is written in Perl) or tools you probably cannot install on the systems you are working on. Hopefully someone else out there finds this useful as well.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://taihen.org/>&copy; taihen.org / 418 ... engineering in progress 2025</a><div><div class=ananke-socials></div></div></div></footer></body></html>